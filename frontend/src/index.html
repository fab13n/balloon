<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trajectoire ballon</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="ol.css"/>
    <style type="text/css">
        h1, h2, h3, p, li, td, th {
            font-family: 'sans-serif';
        }
        td {
            font-size: 9pt;
            white-space: nowrap;
        }
        th {
            font-weight: bold;
            background-color: lightgray;
        }
        table {
            border-collapse: collapse;
            border: 1px solid gray;
        }
        #form_and_position_details {
            border: none;
        }
        #form_table th {
            text-align: right;
        }
        #form_table th[colspan] {
            text-align: center;
            background-color: white;
        }
        #map_and_legend {
            display: inline-flex;
            width: 100%;
        }
        #map {
            width: calc(100% - 40px);
            height: 500px;
        }
        #legend {
            background-color: green;
            width: 35px;
            margin-left: 5px;
            height: 500px;
        }
        #legend .item {
            text-align: right;
            padding-right: 3px;
            font-family: sans-serif;
            font-size: 8pt;
            color: black;
        }
        #trajectory_table {
            border-collapse: collapse;
            width: 100%;
        }
        #trajectory_table th {
            border: 1px solid gray;
        }
        #trajectory_table td {
            font-family: monospace;
            text-align: right;
            border-left: 1px solid gray;
            border-right: 1px solid gray;
            padding-left: 5px;
            padding-right: 5px;
        }
        #trajectory_table td:first-child {
          text-align: left;
        }
        #trajectory_table tr:hover {
              background-color: lightpink;
        }
        table select { width: 100%; background-color: white; }
        table input[type=button] { width: 100%; }

        #explications {
          width: 60em;
          margin-left: auto;
        margin-right: auto;
        }
        span.code {
            font-family: monospace;
        }
        a.path {
            font-family: monospace;
            text-decoration: unset;
        }
        a.path::after {
          content: "üîó";
        }
   </style>
</head>

<body>

  <h1>Pr√©vision de trajectoire ballon</h1>

  <p>
      Cette application permet de pr√©voir la trajectoire d'un ballon,
      d'apr√®s ses caract√©ristiques physiques et les pr√©visions
      m√©t√©o <a href="https://donneespubliques.meteofrance.fr/?fond=rubrique&id_rubrique=30">
      de MeteoFrance </a>
      ou <a href="https://www.nco.ncep.noaa.gov/pmb/products/gfs/"> de
      la NOAA</a>. Elle est inspir√©e par un tableur d√©velopp√© par
      Michel Maignan
      pour <a href="https://www.planete-sciences.org">Plan√®te
      Sciences</a>. Ses sources sont disponibles librement, sous
      license MIT, <a href="https://github.com/fab13n/balloon">sur
      GitHub</a>.
  </p>

  <table id="form_and_position_details"><tr><td>
      <form>
          <input type="hidden" name="id"/>
          <table id="form_table">
              <tr>
                  <th>Mod√®le m√©t√©o :</th>
                  <td colspan="2">
                      <select name="model" class="traj-updater">
                          <optgroup label="M√©t√©o France">
                              <option value="AROME_0.025">Arome 1/40¬∞ France</option>
                              <option value="ARPEGE_0.1">Arp√®ge 1/10¬∞ Europe</option>
                              <option value="ARPEGE_0.5" selected>Arp√®ge 1/2¬∞ Monde</option>
                          </optgroup>
                          <optgroup label="NOAA">
                              <option value="GFS_0.5">GFS 1/2¬∞ Monde</option>
                          </optgroup>
                      </select>
                  </td>
              </tr>
              <tr>
                  <th>Lieu du l√¢cher :</th>
                  <td colspan="2">
                      Latitude  <input type="number" name="latitude"  value="43.5" step="0.001" class="traj-updater"/>
                      Longitude <input type="number" name="longitude" value="1.5" step="0.001" class="traj-updater"/>
                  </td>
              </tr>
              <tr>
                  <th>Date du l√¢cher :</th>
                  <td colspan="2">
                      <select name="date"></select>
                  </td>
              </tr>
              <tr><th colspan="3">Caract√©ristiques du Ballon :</th></tr>
              <tr>
                  <th>Masse de l'enveloppe :</th>
                  <td colspan="2">
                      <select name="balloon_mass_kg" class="impacts_suggestions">
                          <option value="0.5">500g</option>
                          <option value="1">1kg</option>
                          <option value="1.2">1.2kg</option>
                          <option value="2">2kg</option>
                      </select>
                  </td>
              </tr>
              <tr>
                  <th>Masse de la charge :</th>
                  <td><input type="number" name="payload_mass_kg" step="0.001" value="1" class="impacts_suggestions"/>kg</td>
                  <td>Max sugg√©r√© = <span id="suggested_payload_mass">-</span>kg</td>
              </tr>
              <tr>
                  <th>Volume d'h√©lium au d√©collage :</th>
                  <td><input type="number" name="ground_volume_m3" step="0.01" value="2.75" class="impacts_suggestions"/>m¬≥</td>
                  <td><span id="suggested_volume">-</span>m¬≥ sugg√©r√©s</td>
              </tr>
              <tr>
                  <th>Force ascensionnelle libre :</th>
                  <td><span id='lift'>-</span>N</td>
                  <td><span id='suggested_lift'>-</span>N sugg√©r√©s</td>
              </tr>
              <tr><td colspan="3"><input type="button" name="update_trajectory" value="Mettre √† jour la trajectoire"/></td></tr>
              <tr><td colspan="3"><div id="progress"></div></td></tr>
          </table>
      </form>
  </td><td class="position_details">
      Sous le curseur:
      <table>
          <tr><th>Latitude&nbsp;:</th><td><span class="position_y"></span>¬∞</td></tr>
          <tr><th>Longitude&nbsp;:</th><td><span class="position_x"></span>¬∞</td></tr>
          <tr><th>Altitude&nbsp;:</th><td><span class="position_z"></span>m</td></tr>
          <tr><th>Vitesse&nbsp;:</th><td>
              vx=<span class="speed_x"></span>m/s,
              vy=<span class="speed_y"></span>m/s,
              vz=<span class="speed_z"></span>m/s
          </td></tr>
          <tr><th>D√©placement&nbsp;:</th><td>
              dx=<span class="move_x"></span>m,
              dy=<span class="move_y"></span>m,
              dz=<span class="move_z"></span>m,
              dt=<span class="move_t"></span>s
          <tr><th>Date&nbsp;:</th><td class="time"></td></tr>
          <tr><th>Pression&nbsp;:</th><td><span class="pressure"></span>hPa</td></tr>
      </table>
  </td></tr></table>
  <div id="map_and_legend">
      <div id="map"></div>
      <div id="legend"></div>
  </div>
  <table id="trajectory_table">
      <tr>
          <th rowspan="2">Cellule</th>
          <th rowspan="2">Date</th>
          <th rowspan="2">P</th>
          <th rowspan="2">V</th>
          <th rowspan="2">œÅ</th>
          <th colspan="3">Position</th>
          <th colspan="3">Vitesse</th>
          <th colspan="4">D√©placement</th>
      </tr>
      <tr>
          <th>X</th><th>Y</th><th>Z</th>
          <th>·∫ä</th><th>·∫é</th><th>≈ª</th>
          <th>dX</th><th>dY</th><th>dZ</th><th>dT</th>
      </tr>
  </table>

<div id="explications">
  <h2>M√©thode de simulation</h2>

  <h3>Atmosph√®re</h3>

  <p>Les pr√©visions m√©t√©o sont fournies en grille, √† des points fixes
    en latitude, longitude et pression. Les avions mesurent leur
    altitude en pressions et non en m√®tres, si bien que les services
    m√©t√©o ne fournissent de donn√©es index√©es en m√®tres que jusqu'√†
    3000m, tr√®s insuffisants pour des ballons √† h√©lium. Les ¬´
    altitudes ¬ª sont donc donn√©es √† des niveaux standard 1000hPa,
    950hPa, 925hPa etc., dont la hauteur en m√®tres au-dessus du niveau
    de la mer ou du sol varie selon la m√©t√©o.
  </p>

  <p>Les pr√©visions ont une date d'analyse √† laquelle elles sont
    publi√©es, et une date de validit√© qui est la date d√©crite/pr√©dite,
    en g√©n√©ral dans le futur. Pour chaque point de grille, on a entre
    autres les donn√©es suivantes :</p>

  <ul>
    <li>G√©opotentiel : divis√© par l'attraction terrestre G = 9.81m/s¬≤,
      il donne l'altitude au dessus du niveau moyen de la mer (dite ¬´
      above MSL ¬ª en anglais), y compris lorsqu'on n'est pas au-dessus
      de la mer (m¬≤/s¬≤);</li>
    <li>Composantes est‚Üíouest et sud‚Üínord du vent U et V (m/s);</li>
    <li>Temp√©rature T (¬∞K) ;</li>
    <li>Humidit√© relative R (pourcentage).</li>
  </ul>

  <p>En outre, on dispose pour chaque mod√®le d'une grille constante
    d'altitude du sol par rapport au niveau moyen de la mer MSL
    (m).</p>

  <p>Ces donn√©es sont fournies librement sur Internet, sous le format
    GRIB2. Les donn√©es √©tant assez lentes √† extraire du GRIB, on ne
    garde que celles qui nous int√©ressent, et on les pr√©indexe sous
    forme de tableaux <a href="http://www.numpy.org">numpy</a>
    persist√©s en m√©moire avec quelques m√©ta-donn√©es. Cela permet de
    les r√©-extraite quasi instantan√©ment lorsqu'une nouvelle
    trajectoire est demand√©e.</p>

  <p>On extrapole les points de grilles en cellules, des ¬´ cubes
    d'atmosph√®re ¬ª horodat√©s, dont les limites sont √† mi-distance de
    chaque point de grille en X, Y, Z et T (si un vol dure plus
    longtemps qu'un pas de pr√©vision, on peut panacher des pr√©visions
    √† plusieurs √©ch√©ances de temps. Comme les niveaux sont constants
    en pression et non en altitude, les limites sup√©rieures et
    inf√©rieures en Z ne sont pas forc√©ment les m√™mes entre deux
    colonnes X/Y/T diff√©rentes. Le bas de la premi√®re cellule est
    coup√© √† l'altitude du sol (et il faut parfois √©liminer des
    cellules sous-terraines), la cellule du haut √† n'a pas de
    plafond. Les conditions U, V, T¬∞ et R sont suppos√©es constantes au
    sein d'une cellule.</p>

  <p>Tous les mod√®les ne montent pas assez haut, jusqu'√† la pression
    d'√©clatement du ballon. Mais le ballon passe peu de temps aux
    hautes altitudes(peu d'air pour le freiner, il va vite), et les
    conditions m√©t√©o au-dessus de la tropopause sont g√©n√©ralement plus
    calmes et stables, donc il y d√©rive peu et uniform√©ment. On
    extrapole, √† partir des 2 derni√®res cellules, en supposant les
    vents et temp√©ratures constants, et on d√©termine les param√®tres P0
    et K qui permettent √† la pression de suivre une courbe
    exponentielle P(z) = P0¬∑e^(-K¬∑z).
  </p>

  <h3>Ballon</h3>

  <p>Le ballon est soumis √† plusieurs forces :</p>

  <ul>
    <li>son poids vers le bas ;</li>
    <li>la pouss√©e d'Archim√®de vers le haut ;</li>
    <li> la train√©e a√©rodynamique, dans le sens oppos√© au mouvement
      (tra√Æn√©e du ballon √† la mont√©e, du parachute √† la descente).
    </li>
  </ul>

  <p> Pour les approximer, en particulier la on, tra√Æn√©e s'appuie sur
    un mod√®le d√©velopp√© en grande partie par Michel Maignan pour
    Plan√®te Sciences.</p>

  <p>La pouss√©e d'Archim√®de est constante, √©gale au poids d'air
    d√©plac√© : le volume d'h√©lium au sol, multipli√© par la masse
    volumique de l'h√©lium au sol (1.116 kg/m¬≥) et G (9.81 m/s¬≤). Il
    faut en soustraire le poids de l'ensemble ballon+nacelle, M¬∑G, et
    on obtient les forces statiques sur le ballon (le ballon gonfle en
    volume quand la pression baisse, mais comme le nombre de mol√©cules
    d'air par m¬≤ d√©croit √† la m√™me vitesse, √ßa s'annule).</p>

  <p>Il subit √©galement une force dynamique, la tra√Æn√©e a√©rodynamique,
    et sa vitesse s'√©quilibre lorsque la tra√Æn√©e √©gale les forces
    statiques.  La tra√Æn√©e vaut F = ¬Ω¬∑œÅ¬∑S¬∑Cx¬∑V¬≤, o√π œÅ est la densit√©
    de l'air, S la surface frontale su ballon (un cercle de m√™me
    diam√®tre que la sph√®re du ballon), Cx un param√®tre empirique
    propre √† la forme du ballon (ici 0.45), et V la vitesse. On r√©soud
    pour la vitesse, soit V = ‚àö(2F / œÅ¬∑S¬∑Cx), o√π F est √©gal √† la somme
    des forces statiques ci-dessus. Restent √† d√©terminer œÅ et S.</p>

  <p>La surface S se d√©duit de V = 4/3¬∑œÄ¬∑R¬≥ et S = œÄ¬∑R¬≤. On la veut en
    fonction du volume V et pas du rayon R, donc on r√©soud la premi√®re
    √©quation pour R, et on r√©injecte le r√©sultat dans la seconde :
    S = œÄ¬∑(3/4¬∑V/œÄ)^(2/3).</p>

  <p>La densit√© de l'air œÅ est la somme des pressions partielles d'air
    et de vapeur, divis√©es par leurs constantes de gaz sp√©cifiques ,
    287 J/kg/K et 461 J/kg/K respectivement. La pression partielle
    d'eau n'est pas donn√©e directement, mais peut √™tre d√©duite de
    l'humidit√© relative : l'humidit√© relative est √† 100% quand on est
    au point de ros√©e pour une combinaison donn√©e temp√©rature +
    pression partielle d'eau, et ce point se calcule comme p = 6.1078
    ¬∑ 10^(7.5¬∑t / t+237.3), pour une temp√©rature en ¬∞C donn√©e. La
    pression partielle d'air est la diff√©rence entre la pression
    totale et la PP d'eau. NB: pas s√ªr que ce calcul change
    significativement la vitesse ; √† simplifier avec de l'air sec, si
    la diff√©rence n'est pas significative.</p>

  <p>√Ä la redescente, le calcul de vitesse du ballon est transform√©
    comme suit :</p>

  <ul>
    <li>la masse est all√©g√©e du poids de l'enveloppe √©clat√©e ;</li>
    <li>la pouss√©e d'Archim√®de devient n√©gligeable ;</li>
    <li>le Cx du parachute est diff√©rent de celui du ballon
      (empiriquement 1.4), et sa surface constante (toujours œÄ¬∑R¬≤,
      mais R=65cm).</li>
  </ul>

  <h3>Trajectoire</h3>

  <p>La trajectoire est estim√©e sans tenir compte des acc√©l√©rations et
    d√©c√©lerations du ballons: on le suppose en permanence √† sa vitesse
    d'√©quilbre entre pouss√©s+poids et tra√Æn√©e a√©rodynamique, et donc √†
    vitesse constante au sein d'une m√™me cellule. Avec la vitesse du
    ballon et la hauteur de chaque cellule, on calcule le temps qu'y
    passe le ballon, et pendant lequel il subit la d√©rive du vent dans
    cette cellule. On obtient ainsi des d√©rives Nord-Sud et Est-Ouest
    du ballon √† chaque altitude √† la mont√©e et √† la redescente, qu'on
    additionne pour produire une trajectoire compl√®te.</p>

  <h2>Organisation du code</h2>

  <p>L'application est packag√©e sous forme d'un container
    Docker. L'acquisition, le pr√©-processing des donn√©es brutes et le
    calcul de trajectoires sont faits en Python 3.6, sous forme d'une
    application Django 2. La page web est √©crite dans la variante ES7
    de Javascript, traduite et packag√©e par Babel et Webpack. Les
    donn√©es entre le serveur et l'application web circulent en JSON /
    AJAX.</p>

  <h3>Modules Django</h3>

  <ul>
    <li><a class='path' href='balloon'>balloon</a> les r√©glages principaux :
      <a class='path' href='balloon/settings.py'>balloon.settings</a>
      la configuration Django,
      <a class='path' href='balloon/urls.py'>balloon.urls</a>
      les liens entre URL et fonctions Python qui les servent,
      <a class='path' href='balloon/wsgi.py'>balloon.wsgi</a>
      le lanceur pour serveurs web.
    </li>
    <li><a class='path' href='forecast'>forecast</a> la gestion des pr√©visions m√©t√©o :
      <ul>
        <li>Dans <a class='path'
          href='forecast/models.py'>forecast.models</a> les
          descriptions de mod√®les m√©t√©o, la taille et la finesse des
          grilles couvertes, les dates d'analyse, les dates d√©crites,
          la fa√ßon de t√©l√©charger de nouveaux fichiers, des fonctions
          pour arrondir positions et dates aux valeurs les plus
          proches disponibles dans la grille. Les mod√®les s'appuient
          sur une classe auxilliaire
          <span class='code'>FileRef</span>, qui d√©crit un fichier de
          pr√©vision, qu'il soit d√©j√† charg√© localement, pas encore
          r√©cup√©r√©, ou m√™me pas encore produit par le service de
          pr√©visions.
        </li>
        <li><a class='path'
          href='forecast/preprocess.py'>forecast.preprocess</a> Ouvre
          un fichier GRIB, et s'il contient des donn√©es plus r√©centes
          que celles d√©j√† disponibles, les extrait sous forme de
          tableaux numpy (un par date de validit√©) et les persiste
          dans des fichiers : pour chaque √©ch√©ance un
          fichier <span class='code'>&lt;date&gt;.np</span> qui
          contient les donn√©es brutes vent, temperature, altitude et
          humidit√©, et un
          fichier <span class='code'>&lt;date&gt;.json</span> qui
          contient les m√©ta-donn√©es indices de
          latitude/longitude/altitude, et date de production de
          l'analyse.
        </li>
        <li><a class='path' href='forecast/extract.py'>forecast.extract</a>
          impl√©mente une classe <span class='code'>ColumnExtractor</span>,
          capable d'extraire des colonnes d'atmosphere (donn√©es vent
          U+V, T¬∞, humidit√© √† toutes les altitudes pour un X/Y, une
          date et un mod√®le donn√©s) de fichiers numpy produits par
          <a class='path' href='forecast/preprocess.py'>forecast.preprocess</a>.
          Elle est √©galement capable de lister les forecasts
          effectivement disponibles par date pour un mod√®le
          donn√©.
        </li>
        <li><a class='path' href='forecast/views.py'>forecast.views</a>
          contient les fonctions r√©pondant effectivement aux requ√™tes
          web du navigateur: <span class='code'>list_files()</span>
          pour lister les pr√©visions effectivement disponibles
          (d√©l√©gu√© √† <span class='code'>ColumnExtractor</span>)
          et <span class='code'>altitude()</span> qui retourne
          l'altitude du sol par rapport √† la mer √† un X/Y donn√©, lui
          aussi en d√©l√©guant √† un <span class='code'>ColumnExtractor</span>.
        </li>
        <li><a class='path' href='forcast/management/commandes/forecast_download.py'>forecast.management.commands.forecast_download</a>,

          impl√©mentation d'une commande shell qui r√©cup√®re les
          derniers fichiers GRIB pour les mod√®les actifs. La commande
          est lanc√©e, comme toute commande Django, avec
          <span class='code'>./manage.py forecast_download [args]</span>.
          L'essentiel du travail est d√©l√©gu√© √† la m√©thode
          <span class='code'>download_forecasts()</span> des mod√®les m√©t√©o dans
          <a class='path' href='forecast/models.py'>forecast.models</a>.
          Cette commande est destin√©e √† √™tre lanc√©e r√©guli√®rement en
          t√¢che de fond, comme <em>cron job</em>.
        </li>
        <li><a class='path' href='forecast/management/commands/forecast_preprocess.py'>forecast.management.commands.forecast_preprocess</a>,
          autre commande shell qui lance le processing des nouveaux
          fichiers GRIB en fichiers numpy pr√©index√©s. Elle aussi est
          sens√©e √™tre lanc√©e sous forme de cron job, bien qu'on puisse
          le faire aussi √† la main.
        </li>
      </ul><!-- fin de forecast -->
    </li>
    <li><a class='path' href='core'>core</a> est le c≈ìur calculatoire de l'application,
      celui qui calcule effectivement les trajectoires.
      <ul>
        <li><a class='path' href='core/models.py'>core.models</a>
          contient les mod√®les d'objets sur lesquels on travaille pour
          produire les trajectoires.
          <ul>
            <li><span class='code'>Balloon</span> contient les donn√©es essentielles
              d'un a√©ronef: masse, quantit√© d'h√©lium, pouss√©e r√©sultante,
              volume √† l'√©clatement etc.</li>
            <li><span class='code'>Cell</span> une cellule d'atmosphere, √† une
              position X/Y/Z et une date donn√©es. La classe contient
              des donn√©es extraites de tableaux numpy (vent,
              temperature, altitude / pression) et la densit√© locale
              de l'air recalcul√©e, si possible d'apr√®s pression et
              humidit√© relative, √† d√©faut par la formule approch√©e de
              Chapman.
            </li>
            <li><span class='code'>Column</span> une s√©quence
              verticale de cellules <span class='code'>Cell</span>
              pour un X/Y, une date et un mod√®le donn√©s, ainsi que
              l'altitude du sol √† cet endroit, et optionellement des
              cellules extrapol√©es au-del√† de la troposph√®re, si
              celles du mod√®le ne suffisent pas. Les cellules une fois
              ins√©r√©es dans une colonne sont compl√©t√©e : la cellule au
              sol est √©ventuellement tronqu√©e au niveau du sol, et les
              limites entre cellules ainsi que leurs tailles sont
              calcul√©es (on place la limite entre deux cellules √†
              mi-distance du centre de chacune d'elles).
            </li>
          </ul>
        </li>
        <li><a class='path' href='core/trajectory.py'>core.trajectory</a>
          effectue le calcul de trajectoire √† proprement parler. Il
          est constitu√© de fonctions math√©matiques simples,
          correspondant aux formules donn√©es ci-dessus. La fonction
          principale
          <span class='code'>trajectory()</span> it√®re le long d'une
          <span class='code'>Column</span>, cellule apr√®s cellule,
          pour calculer et additionner les d√©rives appliqu√©es par le
          vent au ballon, jusqu'√† ce que le volume de l'enveloppe
          d√©passe le volume d'√©clatement. Alors une seconde boucle est
          parcourue, pour redescendre la colonne d'air jusqu'√† ce que
          le sol soit atteint. Dans les deux boucles, la colonne est
          mise √† jour chaque fois que la d√©rive a suffisamment d√©plac√©
          le ballon pour change le poitn de grille mod√®le le plus
          proche. Enfin, une fonction de mise en forme
          <span class='code'>to_geojson()</span> encode le
          r√©sultat sous le format standard g√©ographique
          <a href="http://www.geojson.org">GeoJSON</a>, utilis√©
          notamment par l'application d'affichage JavaScript.
        </li>
        <li><a class='path' href='core/views.py'>core.views</a>expose
          sous forme de service HTTP la fonction
          <span class='code'>trajectory()</span> ci-dessus, ainsi
          qu'un extracteur de colonne d'atmosph√®re.
        </li>
      </ul>
    </li><!-- fin de core -->
  </ul><!-- fin des modules Django -->

  <h3>Application de visualisation</h3>

  <p>L'appli de visualisation est r√©alis√©e en EcmaScript7 (JavaScript
    norme 2017), et s'appuie largement sur la librairie de
    pr√©sentation de donn√©es <a href="http://www.d3js.org">D3.js</a>,
    ainsi que sur la librairie d'affichage cartographique
    <a href="http://openlayers.org">OpenLayers</a>. Les tuiles de fond
    de carte sont requ√™t√©es dynamiquement aupr√®s de la base cartographique libre
    <a href="http://www.openstreetmap.org">OpenStreetMap</a>.</p>

  <p>Les param√®tres du l√¢cher sont entr√©es dans un formulaire HTML, impl√©ment√© dans
    <a class='path' href='frontend/src/index.html'>frontend/src/index.html</a>.

    Certaines des options du formulaire, telles que les dates du
    pr√©vision disponibles, viennent dynamiquement du serveur Django,
    et sont charg√©e par AJAX, puis mises √† jour dans les widgets par
    D3.js. Lorsque les param√®tres sont rentr√©s, une requ√™te de
    trajectoire est envoy√©e au serveur Django, qui r√©pond avec une
    s√©rie de points de trajectoire en GeoJSON, d√©cor√©s de propri√©t√©s
    physiques et dynamiques (cellule, vitesse, hauteur, date de
    passage, vent local‚Ä¶). Ces donn√©es sont r√©cup√©r√©es par la fonction
    asynchrone <span class='code'>update_trajectory()</span> dans
    <a class='path' href='frontend/src/index.js'>frontend/src/index.js</a>,
    transform√©es en points sur la carte par
    <span class='code'>display_trajectory()</span>, et d√©crites dans
    une table d√©taill√©e par
    <span class='code'>update_trajectory_table()</span>, en utilisant
    encore une fois D3.js pour modifier dynamiquement le DOM.</p>

  <h3>Autres fichiers</h3>

  <p>D'autres fichiers de configuration sont livr√©s avec
    l'application, essentiellement pour permettre le d√©ployement sous
    Docker. On les retrouve dans <a class='path' href='conf'>conf</a>,
    outre le fichier <a class='path' href='Dockerfile'>Dockerfile</a>
    √† la racine, et les classiques
    <span class='code'>.gitignore, .dockerignore, LICENSE</span>. Des
    scripts utilitaires sont √©galement disponibles, dont
    le <a class='path' href='manage.py'>manage.py</a> commun √† tous
    les projets Django,
    <a class='path' href='run_docker.sh'>run_docker.sh</a> qui permet
    de faire tourner le docker en partageant les sources avec l'h√¥te
    pour d√©bugger, et <a class='path' href='webpack.js'>webpack.js</a>
    qui force la recompilation de l'application JavaScript.</p>

  <p>Le r√©pertoire <a class='path' href='data'>data</a> est partag√© avec le
    Docker pour contenir les donn√©es m√©t√©o, fichiers t√©l√©charg√©s et
    tableaux pr√©-index√©s. <a class='path' href='log'>log</a> contient les
    traces d'ex√©cutions produites √† l'int√©rieur du Docker.</p>

  <p>La liste des fichiers de configuration du container, qui seront
    utilis√©s lors de la construction en suivant
    <a class='path' href='Dockerfile'>Dockerfile</a>, et r√©unis
    dans <a class='path' href='conf'>conf/</a>, est la suivante :</p>

  <ul>
    <li><a class='path' href='append-to-bashrc.sh'>append-to-bashrc.sh</a>
      rajoute des r√©glages commodes au profile bash interne au
      container, pour le confort de debuggage ;</li>
    <li><a class='path' href='balloon.cron'>balloon.cron</a> contient les t√¢ches √†
      lancer p√©riodiquement, download, pr√©-indexage et effacement des vieux fichiers ;</li>
    <li><a class='path' href='entrypoint.sh'>entrypoint.sh</a> lance le processus
      principal du container, ici le serveur nginx ;</li>
    <li><a class='path' href='nginx.conf'>nginx.conf</a> la configuration du
      serveur web, qui tente d'abord de servir les fichiers de l'appli
      web, et s'il n'y en a pas correspondant √† la requ√™te, en d√©l√®gue le traitement √† Django ;</li>
    <li><a class='path' href='uwsgi.ini'>uwsgi.ini</a> la config de la passerelle
      nginx / Python, qui permet au serveur web d'invoquer l'application Django.</li>
  </ul>

</div>

<script type="text/javascript" src="index_bundle.js"></script>
</body>
</html>
